connections:
  - name: NATS-connection
    type: NATS
    host: localhost
    port: 4222
    reconnect: "false"
  - name: MQTT-connection
    type: MQTT
    host: localhost
    port: 1883
    reconnect: "false"
    version: "5"
  - name: Riello-PQI
    type: Modbus
    host: 10.1.1.222
    port: 502
transformations:
  - name: Modbus to NATS
    description: Example showing transformation of messages from Modbus to JSON
    connections:
      incoming-connection:
        - Riello-PQI
      incoming-format: JSON
      outgoing-connection:
        - NATS-connection
      outgoing-format: JSON
    to-outgoing:
      to-topic: Riello/PQI
      message: |-
        {
          "voltageRMS": {
            "multiplier": {
              "value": 1
            },
            "value": {
              "lpc:mapping": {
                "path": "32012",
                "type": "float32"
              }
            }
          }
        }
    interval-request:
      interval: 3000
      request:
        modbus-function-code: 3
        modbus-device-id: 1
        modbus-registers:
          - register-address: 32012
            type: float32
  - name: NATS to MQTT
    description: Example showing transformation of messages from JSON to MQTT
    connections:
      incoming-connection:
        - NATS-connection
      incoming-topic: Riello/PQI
      outgoing-connection:
        - MQTT-connection
      outgoing-format: JSON
    to-outgoing:
      to-topic: Riello/PQI
      message: |-
        {
          "voltageRMS": {
            "multiplier": {
              "value": 1
            },
            "value": {
              "lpc:mapping": {
                "path": "voltageRMS/value",
                "type": "integer"
              }
            }
          }
        }

