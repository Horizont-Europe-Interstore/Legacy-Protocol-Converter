connections:
  - name: NATS-connection
    type: NATS
    host: nats://localhost
    port: 4222
    reconnect: true
  - name: Modbus-connection
    type: Modbus
    host: localhost
    port: 502
transformations:
  - name: Modbus to JSON IEEE2030.5 Event
    description: Example showing transformation of messages from Modbus to JSON
    connections:
      incoming-connection:
        - Modbus-connection
      modbus-function-code: 3
      modbus-device-id: 1
      outgoing-connection:
        - NATS-connection
      outgoing-topic: event/myevent
      outgoing-format: JSON
    to-outgoing:
      '{
            "creationTime": $timestamp,
            "eventStatus": {
                "currentStatus": {
                  "lpc:mapping": {
                    "path": "31000",
                    "type": "integer",
                    "values": ["scheduled", "active", "cancelled", "cancelled_with_r", "superseded"]
                  }
                },
                "dateTime": null,
                "potentiallySuperseded": false
              },
              "interval": {
                "duration": {
                  "lpc:mapping": {
                    "path": "32000",
                    "type": "integer"
                  }
                },
                "start": null
              }
            }
        '